<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Nueva Salida</title>
  <link rel="stylesheet" href="/estilos.css">
</head>
<body>

  <main class="contenedor">
    <h2>Registrar Nueva Salida</h2>

    <form action="/salidas/nueva" method="POST">
      
      <!-- Orden de compra editable -->
      <label for="orden_de_compra">Orden de Compra:</label>
      <input type="number" name="orden_de_compra" id="orden_de_compra" placeholder="Se asignará automáticamente si se deja vacío" />

      <label for="Fecha">Fecha:</label>
      <input type="date" name="Fecha" id="Fecha" required>

      <label for="ClienteId">Cliente:</label>
      <select name="ClienteId" id="ClienteId" required>
        <% clientes.forEach(c => { %>
          <option value="<%= c.Id %>"><%= c.Nombre %> - <%= c.RFC %></option>
        <% }) %>
      </select>

      <label for="Producto">Producto:</label>
      <select name="Producto" id="Producto" required>
        <% productos.forEach(p => { %>
          <option value="<%= p.Codigo %>"><%= p.Nombre %> (<%= p.Codigo %>)</option>
        <% }) %>
      </select>

      <label for="Lote">Lote:</label>
      <select name="Lote" id="Lote" required>
      <% lotes.forEach(l => { %>
      <option value="<%= l.Lote %>">
      <%= l.Lote %> - <%= l.Producto %> - caduca <%= l.Caducidad.toISOString().split('T')[0] %> - stock: <%= l.Stock %>
      </option>
      <% }) %>
      </select>


      <label for="Cantidad">Cantidad:</label>
      <input type="number" name="Cantidad" id="Cantidad" min="1" required>

      <label for="Precio_Venta">Precio de Venta:</label>
      <input type="number" step="0.01" name="Precio_Venta" id="Precio_Venta" required>

      <label for="Total_Facturado">Total Facturado:</label>
      <input type="number" step="0.01" name="Total_Facturado" id="Total_Facturado" required>

      
      <label for="Folio_de_Facturacion">Folio de Facturacion:</label>
      <input type="text" step="0.01" name="Folio_de_Facturacion" id="Folio_de_Facturacion" >

      <div class="botones">
        <button type="submit" class="btn btn-exito">Guardar Salida</button>
        <a href="/salidas" class="btn btn-secundario">Cancelar</a>
      </div>

    </form>
  </main>
</body>
</html>
